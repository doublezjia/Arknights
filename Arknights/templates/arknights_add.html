{% extends "base.html" %}

{% block content %}
    {% for message in get_flashed_messages() %}
    <div class="alert alert-warning">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        {{ message }}
    </div>
    {% endfor %}

    <div class="container divline">
    <form method="post" enctype="multipart/form-data"  action="{{url_for('ark_add')}}" class="form-horizontal">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <div class="row">
        <div class="col-md-9">
            <div class="form-group" >
                <label class="col-md-2">姓名:</label><div class="col-md-10"><input name="name" required="required" type="text" class="form-control" ></div>
            </div>
            <div class="form-group" >
                <label class="col-md-2">性别:</label>
                <div class="col-md-10">
                <select class="form-control" name="gender">
                    {% for gender in condition_dict['gender'] %}
                    <option value="{{condition_dict['gender'][gender]}}">{{gender}}</option>
                    {% endfor %}
                  </select>
                </div>
            </div>
            <div class="form-group" >
             <label class="col-md-2">星级:</label>
                <div class="col-md-10">
                <select class="form-control" name="star">
                    {% for star in condition_dict['star'] %}
                    <option value="{{star[0]}}">{{star[0]}}星</option>
                    {% endfor %}
                  </select>
                </div>
            </div>
           <div class="form-group" >
              <label class="col-md-2">阵型:</label>
               <div class="col-md-10">
                   <select class="form-control" name="camp">
                       {% for camp in condition_dict['camp'] %}
                        <option value="{{camp[0]}}">{{camp[0]}}</option>
                       {% endfor %}
                  </select>
               </div>
            </div>
            <div class="form-group" >
               <label class="col-md-2">职业:</label>
                <div class="col-md-10">
                <select class="form-control" name="prof">
                    {% for prof in condition_dict['profession'] %}
                    <option value="{{prof[0]}}">{{prof[0]}}</option>
                    {% endfor %}
                  </select>
                </div>
            </div>
            <div class="form-group" >
              <label class="col-md-2">特性:</label><div class="col-md-10"><input type="text" name="chara" required="required" class="form-control" ></div>
            </div>
            <div class="form-group" >
              <label class="col-md-2">TAG:</label><div class="col-md-10"><input type="text" name="tag" required="required" title="多个TAG要用中文、隔开，不能用其他符号" placeholder="多个TAG要用中文、隔开，不能用其他符号" pattern="^[\u4E00-\u9FA5A-Za-z0-9\u3001]+$" autofocus class="form-control" ></div>
            </div>
            <div class="form-group" >
               <label class="col-md-2">获取方式:</label><div class="col-md-10"><textarea name="getway" required="required" class="form-control" rows="5" id="comment"></textarea></div>
            </div>
        </div>
        <div class="col-md-3 form-group">
            <label>上传头像:</label>
            <div>
                <input name="file1" class="avatarfile" type="file" accept="image/*" onchange="showavatar(this)">
            </div>
            <div>
                <img id="avatar" src="/static/img/12F.png" class="avatar img-fluid float-left" >
            </div>
        </div>
    </div>
    <div class="row" >
        <div class="col-md-12 text-center"><input value="submit" type="submit" class="btn btn-primary" ></div>
    </div>
    </form>
    </div>

<script type="text/javascript">
    // 实现file控件选择图片后显示出来
    function showavatar(filedom) {
        var avatar = document.getElementById('avatar');
        if(window.FileReader){
            var reader = new FileReader();
        }
        else{
            alert('您的设备不支持图片预览功能，如需该功能请升级您的设备！');
        }
        file = filedom.files[0];
        var imageType = /^image\//;
        if(!imageType.test(file.type)){
            alert('请选择图片！')
            return;
        }
        reader.onload = function (e) {
            avatar.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }


</script>

{% endblock %}